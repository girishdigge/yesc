import{ad as C,a3 as w,r as f,D as S,j as e,B as y,ae as b,af as l,S as v,U as P,V as i,W as t,Y as c,I as p,Z as d,T as D,ag as F,ah as A,a4 as M}from"./index-Cmx8tmCA.js";import{P as q}from"./page-head-JZbgdBkr.js";import{u as T,D as _}from"./data-table-skeleton-bOwXvGz_.js";import{E as k,S as I,T as B,D as L}from"./table-search-input-Db5kKJn_.js";import{A as $}from"./alert-modal-C-Gwbevh.js";import{D as K,c as O,d as V,f as H,e as u,B as R}from"./dropdown-menu-T7PwpJO5.js";import{A as N,T as z}from"./auth-BNJ9dyam.js";import{P as U}from"./popup-modal-BmRrTEGG.js";import{H as G}from"./heading-BhocicoW.js";import{S as Y,a as Q,b as W,c as Z,e as J,f as X,d as g}from"./select-BSNOABov.js";import{B as ee}from"./breadcrumbs-DFTZUQU8.js";import"./index-B7XoVwBY.js";import"./scroll-area-C6kJR1FW.js";import"./chevron-left-ehNR0xsy.js";import"./dialog-Cd46RHKw.js";import"./index-yjJknjLS.js";import"./Combination-tArbcmjf.js";import"./index-VWaDGczM.js";const se=(s,o,n)=>T({queryKey:["employees",s,o,n],queryFn:async()=>C(s,o,n)}),ae=({data:s})=>{const{role:o,isAdmin:n}=N(),x=w(),[a]=f.useState(!1),[r,m]=f.useState(!1),h=S(),j=async()=>{await b(s.id),m(!1),x("/employee"),window.location.reload()};return e.jsxs(e.Fragment,{children:[e.jsx($,{isOpen:r,onClose:()=>m(!1),onConfirm:j,loading:a}),e.jsxs(K,{modal:!1,children:[e.jsx(O,{asChild:!0,children:e.jsxs(y,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(k,{className:"h-4 w-4"})]})}),e.jsxs(V,{align:"end",children:[e.jsx(H,{children:"Actions"}),e.jsxs(u,{onClick:()=>h.push(`/employee/details/${s.id}`),children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Details"]}),n&&e.jsxs(u,{onClick:()=>h.push(`/employee/update/${s.id}`),children:[e.jsx(I,{className:"mr-2 h-4 w-4"})," Update"]}),o==="root"&&e.jsxs(u,{onClick:()=>m(!0),children:[e.jsx(z,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})]})},re=[{accessorKey:"username",header:"ID"},{accessorFn:s=>`${s.first_name} ${s.middle_name} ${s.last_name}`.trim(),id:"full_name",header:"NAME"},{accessorKey:"role",header:"ROLE"},{accessorKey:"email",header:"EMAIL"},{accessorKey:"phone",header:"PHONE"},{header:"Actions",id:"actions",cell:({row:s})=>e.jsx(ae,{data:s.original})}],ne=l.object({first_name:l.string({required_error:"First name is required"}).min(1,{message:"firstname is should be at least 1 character"}),middle_name:l.string().min(1,{message:"middlename is required"}),last_name:l.string().min(1,{message:"lastname is required"}),username:l.string().min(1,{message:"username is required"}),role:l.string().min(1,{message:"role is required"}),email:l.string().email({message:"Enter a valid email address"}),phone:l.string().min(10,{message:"Enter a valid phone number"}),password:l.string().min(1,{message:"Password is required"}),confirmPassword:l.string().min(1,{message:"Confirm Password is required"})}).refine(s=>s.password===s.confirmPassword,{message:"Passwords must match",path:["confirmPassword"]}),oe=({modalClose:s})=>{const o=w(),n=v({resolver:D(ne),defaultValues:{}}),x=async a=>{var m;const r=await F(a);(r==null?void 0:r.status)===201&&(console.log(r==null?void 0:r.data),A({title:(m=r==null?void 0:r.data)==null?void 0:m.message,description:"Project Created Successfully!"})),s(),o("/employee"),window.location.reload()};return e.jsxs("div",{className:"px-2",children:[e.jsx(G,{title:"Create New Employee",description:"",className:"space-y-2 py-10 text-center"}),e.jsx(P,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(x),className:"space-y-12",autoComplete:"off",children:[e.jsxs("div",{className:"grid gap-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-x-4 gap-y-4",children:[e.jsx(i,{control:n.control,name:"first_name",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(p,{placeholder:"Firstname",...a,className:" px-4 py-6 shadow-inner drop-shadow-xl"})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"middle_name",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(p,{placeholder:"Middlename",...a,className:" px-4 py-6 shadow-inner drop-shadow-xl"})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"last_name",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(p,{placeholder:"Lastname",...a,className:" px-4 py-6 shadow-inner drop-shadow-xl"})}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:" grid grid-cols-2 gap-x-8 gap-y-4",children:[e.jsx(i,{control:n.control,name:"username",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(p,{placeholder:"Enter username",...a,className:" px-4 py-6 shadow-inner drop-shadow-xl"})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"role",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:e.jsxs(Y,{onValueChange:r=>a.onChange(r),defaultValue:a.value,children:[e.jsx(Q,{className:"w-full px-4 py-6 shadow-inner drop-shadow-xl",children:e.jsx(W,{placeholder:"Select Role"})}),e.jsx(Z,{children:e.jsxs(J,{children:[e.jsx(X,{children:"Designation"}),e.jsx(g,{value:"engineer",children:"Engineer"}),e.jsx(g,{value:"senior",children:"Senior"}),e.jsx(g,{value:"admin",children:"Admin"})]})})]})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"email",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(p,{placeholder:"Enter email",...a,className:" px-4 py-6 shadow-inner drop-shadow-xl"})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"phone",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(p,{placeholder:"Enter phone",...a,className:" px-4 py-6 shadow-inner drop-shadow-xl"})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"password",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(p,{placeholder:"Create password",...a,className:" px-4 py-6 shadow-inner drop-shadow-xl"})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"confirmPassword",render:({field:a})=>e.jsxs(t,{children:[e.jsx(c,{children:e.jsx(p,{placeholder:"Confirm password",...a,className:" px-4 py-6 shadow-inner drop-shadow-xl"})}),e.jsx(d,{})]})})]})]}),e.jsxs("div",{className:" flex items-center justify-center gap-4",children:[e.jsx(y,{type:"button",variant:"secondary",className:"rounded-full ",size:"lg",onClick:s,children:"Cancel"}),e.jsx(y,{type:"submit",className:"rounded-full",size:"lg",children:"Create Employee"})]})]})})]})},le=oe;function ie(){const{isAdmin:s}=N();return e.jsxs("div",{className:"flex items-center justify-between gap-2 py-5",children:[e.jsx("div",{className:"flex flex-1 gap-4",children:e.jsx(B,{placeholder:"Search Employees "})}),e.jsx("div",{className:"flex gap-3",children:s&&e.jsx(U,{title:"Employee",renderModal:o=>e.jsx(le,{modalClose:o})})})]})}function te({employees:s,pageCount:o}){return e.jsxs(e.Fragment,{children:[e.jsx(ie,{}),s&&e.jsx(L,{columns:re,data:s,pageCount:o})]})}function Pe(){const[s]=M(),o=Number(s.get("page")||1),n=Number(s.get("limit")||10),x=s.get("search")||null,a=(o-1)*n,{data:r,isLoading:m}=se(a,n,x),h=r==null?void 0:r.employees,j=r==null?void 0:r.totalEmployees,E=r==null?void 0:r.pageCount;return m?e.jsx("div",{className:"p-5",children:e.jsx(_,{columnCount:10,filterableColumnCount:2,searchableColumnCount:1})}):e.jsxs("div",{className:"p-4 md:p-8",children:[e.jsx(q,{title:"Employee Management | YSEC"}),e.jsx("div",{className:"flex justify-between",children:e.jsx(ee,{items:[{title:"Dashboard",link:"/"},{title:"Employees",link:"/employees"}]})}),e.jsx(te,{employees:h,page:o,totalEmployees:j,pageCount:E})]})}export{Pe as default};

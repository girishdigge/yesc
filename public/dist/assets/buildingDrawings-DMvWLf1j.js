import{u as S}from"./projectAPI-Cmn6CIod.js";import{c as C}from"./todoAPI-Cfj5uBOX.js";const m=(e,i)=>{const{Underground_Tank:l,Septic_Tank:c,Tie_Level:u,No_of_Floors:a,Completed_Floors:s,Terrace_Floor:n,Staircase_Cap:t,Overhead_Tank:o}=i,r=e.split(" ")[1];switch(console.log(e,r),e){case"Not Started":return["Concept Framing"];case"Concept Framing":return["Foundation Level"];case"Foundation Level":return l?["Underground Water Tank"]:c?["Septic Tank"]:a>=1?["Ground Floor"]:n?["Terrace Floor"]:t?["Staircase Cap"]:o?["Overhead Water Tank"]:["Completed"];case"Underground Water Tank":return c?["Septic Tank"]:a>=1?["Ground Floor"]:n?["Terrace Floor"]:t?["Staircase Cap"]:o?["Overhead Water Tank"]:["Completed"];case"Septic Tank":return a>=1?["Ground Floor"]:["Completed"];case"Ground Floor":return u?["Tie Level"]:a>1?["First Floor"]:n?["Terrace Floor"]:t?["Staircase Cap"]:o?["Overhead Water Tank"]:["Completed"];case"Tie Level":return a>1?["First Floor"]:n?["Terrace Floor"]:t?["Staircase Cap"]:o?["Overhead Water Tank"]:["Completed"];case"First Floor":return a>2?["Floor 2"]:n?["Terrace Floor"]:t?["Staircase Cap"]:o?["Overhead Water Tank"]:["Completed"];case`Floor ${r}`:return a>parseInt(r)+1?[`Floor ${parseInt(r)+1}`]:n?["Terrace Floor"]:t?["Staircase Cap"]:o?["Overhead Water Tank"]:["Completed"];case"Multiple Floors":return a>s?[`Floor ${parseInt(s)}`]:n?["Terrace Floor"]:t?["Staircase Cap"]:o?["Overhead Water Tank"]:["Completed"];case"Terrace Floor":return t?["Staircase Cap"]:o?["Overhead Water Tank"]:["Completed"];case"Staircase Cap":return o?["Overhead Water Tank"]:["Completed"];case"Overhead Water Tank":return["Completed"];default:return["Error"]}},v=async e=>{const i=(e==null?void 0:e.Activity)||[],l=i.length?i[i.length-1]:null,c=e==null?void 0:e.Project_Name,u=e==null?void 0:e.id,a=e==null?void 0:e.Inhouse_Engineer,s=new Date(e==null?void 0:e.Assigned_Date);console.log(u,i,l,c,a,s),console.log(e);const n=m(l,e),t=n[0],o=t.split(" ")[1];t==="Completed"&&(e.Project_Status=t);const r=async(f,d,T,k)=>{const F={Project_Id:u,Project_Name:c,Inhouse_Engineer:a,Title:f,Description:d,Deadline:T,Status:k};console.log(F);const p=await C(F);console.log(p==null?void 0:p.data)};for(const f of n)switch(f){case"Concept Framing":await r("Concept Framing","",s.getTime()+25*24*60*60*1e3,"Not Started");break;case"Foundation Level":await r("Foundation Level","",Date.now()+25*24*60*60*1e3,"Not Started");break;case"Underground Water Tank":await r("Underground Water Tank","",Date.now()+25*24*60*60*1e3,"Not Started");break;case"Septic Tank":await r("Septic Tank","",Date.now()+25*24*60*60*1e3,"Not Started");break;case"Ground Floor":await r("Ground Floor","",Date.now()+25*24*60*60*1e3,"Not Started");break;case"First Floor":await r("First Floor","",Date.now()+25*24*60*60*1e3,"Not Started");break;case"Tie Level":await r("Tie Level","",Date.now()+25*24*60*60*1e3,"Not Started");break;case"Floor 2":await r("Floor 2","",Date.now()+25*24*60*60*1e3,"Not Started");break;case`Floor ${o}`:await r(`Floor ${o}`,"",Date.now()+25*24*60*60*1e3,"Not Started");break;case"Terrace Floor":await r("Terrace Floor","",Date.now()+25*24*60*60*1e3,"Not Started");break;case"Staircase Cap":await r("Staircase Cap","",Date.now()+25*24*60*60*1e3,"Not Started");break;case"Overhead Water Tank":await r("Overhead Water Tank","",Date.now()+25*24*60*60*1e3,"Not Started");break;case"Completed":S(e.id,e),console.log("Project is marked complete");break;default:console.log("Unknown stage:",f)}};export{v as b};

import{a3 as D,r as S,S as J,j as e,U as I,i as L,V as i,W as l,X as a,Y as o,I as c,Z as d,a6 as W,B as y,Q as M,T as R,a7 as $,a8 as Y}from"./index-BXDbsqbo.js";import{B as H}from"./breadcrumbs-Cino7dU2.js";import{P as Q}from"./page-container-Ch80GJFT.js";import{H as X}from"./heading-CqfL5u9R.js";import{S as u,a as p,b,c as g,d as h}from"./select-DFIhruV3.js";import{S as T,p as Z}from"./form-schema-DEMW4fUw.js";import{p as q,a as z,b as G,c as K}from"./formOptions-DVbo6krV.js";import{g as ee}from"./clientAPI-Cr0eY0Pf.js";import{b as re,u as se}from"./projectAPI-DvtD3eNr.js";import"./index-DlMF79EV.js";import"./scroll-area--VEKLjzS.js";import"./Combination-eBLdYrgw.js";const ne="Edit Project",le="To Edit project, Update the information about project.",C=[{id:"Step 1",name:"Architect/Engineer Details",fields:["ArchitectName","EngineerName","ArEmail","ErEmail","FirmName","ContactDetails"]},{id:"Step 2",name:"Project Details",fields:["Inhouse_Engineer","Client","Project_Name","Project_Job_Number","Project_Job_Category","Project_Job_Type","Assigned_Date","Project_Address","Project_Status","Building_Status","Completed_Floors"]},{id:"Step 3",name:"Project Information",fields:["SBC_File","SBC_Number","Overhead_Tank","Overhead_Tank_Position","Overhead_Tank_Capacity","Underground_Tank","Underground_Tank_Position","Underground_Tank_Capacity","Septic_Tank","Septic_Tank_Position","Septic_Tank_Capacity","Future_Expantion","No_of_Floors","Remarks"]},{id:"Step 4",name:"Site Details",fields:["Site_Person_Name","Site_Email","Site_Phone1","Site_Phone2","Owner_Name","Owner_Email","Owner_Phone1","Owner_Phone2"]},{id:"Step 5",name:"Complete"}],ae=_=>{const k=D(),f=_.id,[j,P]=S.useState(0),[w,F]=S.useState([]),[E,O]=S.useState([]),[t,V]=S.useState(!0),n=J({resolver:R(Z),defaultValues:{Overhead_Tank:!1,Underground_Tank:!1,Septic_Tank:!1,SBC_File:void 0},mode:"onChange"});S.useEffect(()=>{(async()=>{const s=await $();F(s);const m=await ee();if(O(m),f)try{const x=await re(f);console.log(x),n.reset(x)}catch(x){console.error("Error fetching project:",x)}finally{V(!1)}})()},[f,n]);const v=async r=>{if(f)try{const s=new FormData;Object.entries(r).forEach(([m,x])=>{(m==="SBC_File"&&x instanceof File||x!=null)&&s.append(m,x)}),s.append("id",f),await se(s),k("/projects")}catch(s){console.error("Error updating project:",s)}},B=async()=>{const r=C[j].fields;await n.trigger(r,{shouldFocus:!0})&&j<C.length-1&&(j===C.length-2&&await n.handleSubmit(v)(),P(m=>m+1))},U=()=>{j>0&&P(r=>r-1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(X,{title:ne,description:le})}),e.jsx(T,{}),e.jsx("div",{children:e.jsx("ul",{className:"flex gap-4",children:C.map((r,s)=>e.jsx("li",{className:"md:flex-1",children:j>s?e.jsxs("div",{className:"group flex w-full flex-col border-l-4 border-sky-600 py-2 pl-4 transition-colors md:border-l-0 md:border-t-4 md:pb-0 md:pl-0 md:pt-4",children:[e.jsx("span",{className:"text-sm font-medium text-sky-600 transition-colors ",children:r.id}),e.jsx("span",{className:"text-sm font-medium",children:r.name})]}):j===s?e.jsxs("div",{className:"flex w-full flex-col border-l-4 border-sky-600 py-2 pl-4 md:border-l-0 md:border-t-4 md:pb-0 md:pl-0 md:pt-4","aria-current":"step",children:[e.jsx("span",{className:"text-sm font-medium text-sky-600",children:r.id}),e.jsx("span",{className:"text-sm font-medium",children:r.name})]}):e.jsxs("div",{className:"group flex h-full w-full flex-col border-l-4 border-gray-200 py-2 pl-4 transition-colors md:border-l-0 md:border-t-4 md:pb-0 md:pl-0 md:pt-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 transition-colors",children:r.id}),e.jsx("span",{className:"text-sm font-medium",children:r.name})]})},r.name))})}),e.jsx(T,{}),e.jsx(I,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(v),className:"w-full space-y-8",children:[e.jsxs("div",{className:L(j===2?"gap-4 md:grid md:grid-cols-1":"gap-8 md:grid md:grid-cols-2"),children:[j===0&&e.jsxs(e.Fragment,{children:[e.jsx(i,{control:n.control,name:"ArchitectName",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Architect Name"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Architect Name",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"EngineerName",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Engineer Name"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Engineer Name",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"ArEmail",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Architect Email"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"johndoe@gmail.com",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"ErEmail",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Engineer Email"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"johndoe@gmail.com",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"FirmName",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Firm Name"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Firm Name",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"ContactDetails",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Contact Details"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Contact Details",...r})}),e.jsx(d,{})]})})]}),j===1&&e.jsxs(e.Fragment,{children:[e.jsx(i,{control:n.control,name:"Inhouse_Engineer",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Assign Inhouse Engineer"}),e.jsx(o,{children:e.jsxs(u,{disabled:t,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(p,{children:e.jsx(b,{placeholder:"Select Inhouse Engineer"})}),e.jsx(g,{children:w.map(s=>e.jsx(h,{value:s==null?void 0:s.username,children:s==null?void 0:s.full_name},s==null?void 0:s.id))})]})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Client",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Client"}),e.jsx(o,{children:e.jsxs(u,{disabled:t,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(p,{children:e.jsx(b,{placeholder:"Select Client"})}),e.jsx(g,{children:E.map(s=>e.jsx(h,{value:s==null?void 0:s.full_name,children:s==null?void 0:s.full_name},s==null?void 0:s.id))})]})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Project_Name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Project Name"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Project Name",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Project_Job_Number",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Project Job Number"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Project Job Number",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Project_Job_Category",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Project Job Category"}),e.jsx(o,{children:e.jsxs(u,{disabled:t,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(p,{children:e.jsx(b,{placeholder:"Select Job Category"})}),e.jsx(g,{children:q.map(s=>e.jsx(h,{value:s,children:s},s))})]})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Project_Job_Type",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Project Job Type"}),e.jsx(o,{children:e.jsxs(u,{disabled:t,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(p,{children:e.jsx(b,{placeholder:"Select Job Type"})}),e.jsx(g,{children:z.map(s=>e.jsx(h,{value:s,children:s},s))})]})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Assigned_Date",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Assigned Date"}),e.jsx(o,{children:e.jsx(c,{type:"date",disabled:t,...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Project_Address",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Project Address"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Project Address",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Project_Status",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Project Status"}),e.jsx(o,{children:e.jsxs(u,{disabled:t,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(p,{children:e.jsx(b,{placeholder:"Select Project Status"})}),e.jsx(g,{children:G.map(s=>e.jsx(h,{value:s,children:s},s))})]})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Building_Status",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Building Status"}),e.jsx(o,{children:e.jsxs(u,{disabled:t,onValueChange:s=>{r.onChange(s),s!=="Multiple Floors"&&n.setValue("Completed_Floors","0")},value:r.value,defaultValue:r.value,children:[e.jsx(p,{children:e.jsx(b,{placeholder:"Select Building Status"})}),e.jsx(g,{children:K.map(s=>e.jsx(h,{value:s,children:s},s))})]})}),e.jsx(d,{})]})}),e.jsx("div",{}),n.watch("Building_Status")==="Multiple Floors"&&e.jsx(i,{control:n.control,name:"Completed_Floors",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Number of Floors already complete"}),e.jsx(o,{children:e.jsx(c,{disabled:t,type:"number",placeholder:"How many floors are completed?",...r})}),e.jsx(d,{})]})})]}),j===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2 md:grid-cols-2",children:[e.jsx(W,{name:"SBC_File",control:n.control,render:({field:{onChange:r,value:s,...m}})=>e.jsxs(l,{children:[e.jsx(a,{children:"SBC Upload"}),e.jsx(o,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{type:"file",onChange:x=>{var N;const A=(N=x.target.files)==null?void 0:N[0];r(A)},...m}),s&&typeof s=="string"&&e.jsx(y,{onClick:()=>window.open(`${M}/uploads/${s}`,"_blank"),children:"View Current SBC File"})]})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"SBC_Number",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"SBC Number"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"SBC Number",...r})}),e.jsx(d,{})]})})]}),e.jsx(i,{control:n.control,name:"Overhead_Tank",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Overhead Water Tank"}),e.jsxs(u,{disabled:t,onValueChange:s=>{r.onChange(s==="true"),s==="false"&&(n.setValue("Overhead_Tank_Position",""),n.setValue("Overhead_Tank_Capacity",""))},value:r.value?"true":"false",defaultValue:r.value?"true":"false",children:[e.jsx(o,{children:e.jsx(p,{children:e.jsx(b,{defaultValue:r.value?"true":"false",placeholder:"Overhead Water Tank"})})}),e.jsxs(g,{children:[e.jsx(h,{value:"true",children:"Yes"}),e.jsx(h,{value:"false",children:"No"})]})]}),e.jsx(d,{})]})}),n.watch("Overhead_Tank")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx(i,{control:n.control,name:"Overhead_Tank_Position",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Overhead Tank Position"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Overhead Tank Position",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Overhead_Tank_Capacity",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Overhead Tank Capacity"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Overhead Tank Capacity",...r})}),e.jsx(d,{})]})})]}),e.jsx(i,{control:n.control,name:"Underground_Tank",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Underground Water Tank"}),e.jsxs(u,{disabled:t,onValueChange:s=>{r.onChange(s==="true"),s==="false"&&(n.setValue("Underground_Tank_Position",""),n.setValue("Underground_Tank_Capacity",""))},value:r.value?"true":"false",defaultValue:r.value?"true":"false",children:[e.jsx(o,{children:e.jsx(p,{children:e.jsx(b,{defaultValue:r.value?"true":"false",placeholder:"Underground Water Tank"})})}),e.jsxs(g,{children:[e.jsx(h,{value:"true",children:"Yes"}),e.jsx(h,{value:"false",children:"No"})]})]}),e.jsx(d,{})]})}),n.watch("Underground_Tank")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx(i,{control:n.control,name:"Underground_Tank_Position",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Underground Tank Position"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Underground Tank Position",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Underground_Tank_Capacity",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Underground Tank Capacity"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Underground Tank Capacity",...r})}),e.jsx(d,{})]})})]}),e.jsx(i,{control:n.control,name:"Septic_Tank",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Septic Tank"}),e.jsxs(u,{disabled:t,onValueChange:s=>{r.onChange(s==="true"),s==="false"&&(n.setValue("Septic_Tank_Position",""),n.setValue("Septic_Tank_Capacity",""))},value:r.value?"true":"false",defaultValue:r.value?"true":"false",children:[e.jsx(o,{children:e.jsx(p,{children:e.jsx(b,{defaultValue:r.value?"true":"false",placeholder:"Septic Tank"})})}),e.jsxs(g,{children:[e.jsx(h,{value:"true",children:"Yes"}),e.jsx(h,{value:"false",children:"No"})]})]}),e.jsx(d,{})]})}),n.watch("Septic_Tank")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx(i,{control:n.control,name:"Septic_Tank_Position",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Septic Tank Position"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Septic Tank Position",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Septic_Tank_Capacity",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Septic Tank Capacity"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Septic Tank Capacity",...r})}),e.jsx(d,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(i,{control:n.control,name:"No_of_Floors",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"No of Floors"}),e.jsx(o,{children:e.jsx(c,{type:"number",placeholder:"No of Floors",disabled:t,...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Future_Expantion",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Future Expantion"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Future Expantion",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Remarks",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Remarks (Additional Info)"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Remarks (Additional Info)",...r})}),e.jsx(d,{})]})})]})]}),j===3&&e.jsxs(e.Fragment,{children:[e.jsx(i,{control:n.control,name:"Site_Person_Name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Site Person Name"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Site Person Name",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Site_Email",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Site Email"}),e.jsx(o,{children:e.jsx(c,{type:"email",disabled:t,placeholder:"site@example.com",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Site_Phone1",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Site Phone 1"}),e.jsx(o,{children:e.jsx(c,{type:"tel",disabled:t,placeholder:"Site Phone 1",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Site_Phone2",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Site Phone 2"}),e.jsx(o,{children:e.jsx(c,{type:"tel",disabled:t,placeholder:"Site Phone 2",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Owner_Name",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Owner Name"}),e.jsx(o,{children:e.jsx(c,{disabled:t,placeholder:"Owner Name",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Owner_Email",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Owner Email"}),e.jsx(o,{children:e.jsx(c,{type:"email",disabled:t,placeholder:"owner@example.com",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Owner_Phone1",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Owner Phone 1"}),e.jsx(o,{children:e.jsx(c,{type:"tel",disabled:t,placeholder:"Owner Phone 1",...r})}),e.jsx(d,{})]})}),e.jsx(i,{control:n.control,name:"Owner_Phone2",render:({field:r})=>e.jsxs(l,{children:[e.jsx(a,{children:"Owner Phone 2"}),e.jsx(o,{children:e.jsx(c,{type:"tel",disabled:t,placeholder:"Owner Phone 2",...r})}),e.jsx(d,{})]})})]}),j===4&&e.jsxs("div",{children:[e.jsx("h1",{children:"Completed"}),e.jsx(y,{children:"Submit"})]})]}),e.jsx("div",{className:"mt-8 pt-5",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:U,disabled:j===0,className:"rounded bg-white px-2 py-1 text-sm font-semibold text-sky-900 shadow-sm ring-1 ring-inset ring-sky-300 hover:bg-sky-50 disabled:cursor-not-allowed disabled:opacity-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),e.jsx("button",{type:"button",onClick:B,disabled:j===C.length-1,className:"rounded bg-white px-2 py-1 text-sm font-semibold text-sky-900 shadow-sm ring-1 ring-inset ring-sky-300 hover:bg-sky-50 disabled:cursor-not-allowed disabled:opacity-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})})]})})]})},oe=ae;function _e(){const{id:_}=Y(),k=[{title:"Dashboard",link:"/"},{title:"Projects",link:"/projects"},{title:`${_}`,link:`/projects/${_}`}];return e.jsx(Q,{scrollable:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{items:k}),e.jsx(oe,{id:_})]})})}export{_e as default};

import{J as A,r as _,v as B,j as e,F as U,i as J,x as l,y as a,z as o,A as d,I as c,D as t,B as D,w as I,O as L}from"./index-BB6X3njJ.js";import{B as W}from"./breadcrumbs-RVjN4Hlb.js";import{P as M}from"./page-container-BbHTN7Xu.js";import{H as R}from"./heading-CM_0-Vep.js";import{S as h,a as m,b as u,c as p,d as x}from"./select-uvdU0uDm.js";import{S as N,p as H}from"./form-schema-D2PkAz5M.js";import{p as Y,a as $,b as z,c as q}from"./formOptions-DVbo6krV.js";import{g as G}from"./api-C0uGa2CL.js";import{g as K}from"./clientAPI-DhC1hYx8.js";import{b as Q,u as X}from"./projectAPI-Cmn6CIod.js";import"./index-BYsGAs3W.js";import"./scroll-area-BJ_NemdG.js";import"./Combination-DksVHMeb.js";import"./axios-Cm0UX6qg.js";const Z="Edit Project",ee="To Edit project, Update the information about project.",f=[{id:"Step 1",name:"Architect/Engineer Details",fields:["ArchitectName","EngineerName","ArEmail","ErEmail","FirmName","ContactDetails"]},{id:"Step 2",name:"Project Details",fields:["Inhouse_Engineer","Client","Project_Name","Project_Job_Number","Project_Job_Category","Project_Job_Type","Assigned_Date","Project_Address","Project_Status","Building_Status","Completed_Floors"]},{id:"Step 3",name:"Project Information",fields:["SBC_File","SBC_Number","Overhead_Tank","Overhead_Tank_Position","Overhead_Tank_Capacity","Underground_Tank","Underground_Tank_Position","Underground_Tank_Capacity","Septic_Tank","Septic_Tank_Position","Septic_Tank_Capacity","Future_Expantion","No_of_Floors","Remarks"]},{id:"Step 4",name:"Site Details",fields:["Site_Person_Name","Site_Email","Site_Phone1","Site_Phone2","Owner_Name","Owner_Email","Owner_Phone1","Owner_Phone2"]},{id:"Step 5",name:"Complete"}],re=b=>{const k=A(),g=b.id,[j,C]=_.useState(0),[y,T]=_.useState([]),[w,E]=_.useState([]),[i,F]=_.useState(!0),s=B({resolver:I(H),defaultValues:{Overhead_Tank:!1,Underground_Tank:!1,Septic_Tank:!1},mode:"onChange"});_.useEffect(()=>{(async()=>{const n=await G();T(n);const v=await K();if(E(v),g)try{const S=await Q(g);console.log(S),s.reset(S)}catch(S){console.error("Error fetching project:",S)}finally{F(!1)}})()},[g,s]);const P=async r=>{if(g)try{await X(g,r),k("/projects")}catch(n){console.error("Error updating project:",n)}},O=async()=>{const r=f[j].fields;await s.trigger(r,{shouldFocus:!0})&&j<f.length-1&&(j===f.length-2&&await s.handleSubmit(P)(),C(v=>v+1))},V=()=>{j>0&&C(r=>r-1)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(R,{title:Z,description:ee})}),e.jsx(N,{}),e.jsx("div",{children:e.jsx("ul",{className:"flex gap-4",children:f.map((r,n)=>e.jsx("li",{className:"md:flex-1",children:j>n?e.jsxs("div",{className:"group flex w-full flex-col border-l-4 border-sky-600 py-2 pl-4 transition-colors md:border-l-0 md:border-t-4 md:pb-0 md:pl-0 md:pt-4",children:[e.jsx("span",{className:"text-sm font-medium text-sky-600 transition-colors ",children:r.id}),e.jsx("span",{className:"text-sm font-medium",children:r.name})]}):j===n?e.jsxs("div",{className:"flex w-full flex-col border-l-4 border-sky-600 py-2 pl-4 md:border-l-0 md:border-t-4 md:pb-0 md:pl-0 md:pt-4","aria-current":"step",children:[e.jsx("span",{className:"text-sm font-medium text-sky-600",children:r.id}),e.jsx("span",{className:"text-sm font-medium",children:r.name})]}):e.jsxs("div",{className:"group flex h-full w-full flex-col border-l-4 border-gray-200 py-2 pl-4 transition-colors md:border-l-0 md:border-t-4 md:pb-0 md:pl-0 md:pt-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500 transition-colors",children:r.id}),e.jsx("span",{className:"text-sm font-medium",children:r.name})]})},r.name))})}),e.jsx(N,{}),e.jsx(U,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(P),className:"w-full space-y-8",children:[e.jsxs("div",{className:J(j===2?"gap-4 md:grid md:grid-cols-1":"gap-8 md:grid md:grid-cols-2"),children:[j===0&&e.jsxs(e.Fragment,{children:[e.jsx(l,{control:s.control,name:"ArchitectName",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Architect Name"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Architect Name",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"EngineerName",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Engineer Name"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Engineer Name",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"ArEmail",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Architect Email"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"johndoe@gmail.com",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"ErEmail",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Engineer Email"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"johndoe@gmail.com",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"FirmName",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Firm Name"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Firm Name",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"ContactDetails",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Contact Details"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Contact Details",...r})}),e.jsx(t,{})]})})]}),j===1&&e.jsxs(e.Fragment,{children:[e.jsx(l,{control:s.control,name:"Inhouse_Engineer",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Assign Inhouse Engineer"}),e.jsx(d,{children:e.jsxs(h,{disabled:i,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select Inhouse Engineer"})}),e.jsx(p,{children:y.map(n=>e.jsx(x,{value:n==null?void 0:n.username,children:n==null?void 0:n.full_name},n==null?void 0:n.id))})]})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Client",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Client"}),e.jsx(d,{children:e.jsxs(h,{disabled:i,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select Client"})}),e.jsx(p,{children:w.map(n=>e.jsx(x,{value:n==null?void 0:n.full_name,children:n==null?void 0:n.full_name},n==null?void 0:n.id))})]})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Project_Name",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Project Name"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Project Name",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Project_Job_Number",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Project Job Number"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Project Job Number",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Project_Job_Category",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Project Job Category"}),e.jsx(d,{children:e.jsxs(h,{disabled:i,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select Job Category"})}),e.jsx(p,{children:Y.map(n=>e.jsx(x,{value:n,children:n},n))})]})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Project_Job_Type",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Project Job Type"}),e.jsx(d,{children:e.jsxs(h,{disabled:i,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select Job Type"})}),e.jsx(p,{children:$.map(n=>e.jsx(x,{value:n,children:n},n))})]})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Assigned_Date",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Assigned Date"}),e.jsx(d,{children:e.jsx(c,{type:"date",disabled:i,...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Project_Address",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Project Address"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Project Address",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Project_Status",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Project Status"}),e.jsx(d,{children:e.jsxs(h,{disabled:i,onValueChange:r.onChange,defaultValue:r.value,children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select Project Status"})}),e.jsx(p,{children:z.map(n=>e.jsx(x,{value:n,children:n},n))})]})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Building_Status",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Building Status"}),e.jsx(d,{children:e.jsxs(h,{disabled:i,onValueChange:n=>{r.onChange(n),n!=="Multiple Floors"&&s.setValue("Completed_Floors","0")},value:r.value,defaultValue:r.value,children:[e.jsx(m,{children:e.jsx(u,{placeholder:"Select Building Status"})}),e.jsx(p,{children:q.map(n=>e.jsx(x,{value:n,children:n},n))})]})}),e.jsx(t,{})]})}),e.jsx("div",{}),s.watch("Building_Status")==="Multiple Floors"&&e.jsx(l,{control:s.control,name:"Completed_Floors",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Number of Floors already complete"}),e.jsx(d,{children:e.jsx(c,{disabled:i,type:"number",placeholder:"How many floors are completed?",...r})}),e.jsx(t,{})]})})]}),j===2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx(l,{control:s.control,name:"SBC_File",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"SBC Upload"}),e.jsx(d,{children:e.jsx(c,{type:"file",onChange:r.onChange})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"SBC_Number",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"SBC Number"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"SBC Number",...r})}),e.jsx(t,{})]})})]}),e.jsx(l,{control:s.control,name:"Overhead_Tank",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Overhead Water Tank"}),e.jsxs(h,{disabled:i,onValueChange:n=>{r.onChange(n==="true"),n==="false"&&(s.setValue("Overhead_Tank_Position",""),s.setValue("Overhead_Tank_Capacity",""))},value:r.value?"true":"false",defaultValue:r.value?"true":"false",children:[e.jsx(d,{children:e.jsx(m,{children:e.jsx(u,{defaultValue:r.value?"true":"false",placeholder:"Overhead Water Tank"})})}),e.jsxs(p,{children:[e.jsx(x,{value:"true",children:"Yes"}),e.jsx(x,{value:"false",children:"No"})]})]}),e.jsx(t,{})]})}),s.watch("Overhead_Tank")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx(l,{control:s.control,name:"Overhead_Tank_Position",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Overhead Tank Position"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Overhead Tank Position",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Overhead_Tank_Capacity",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Overhead Tank Capacity"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Overhead Tank Capacity",...r})}),e.jsx(t,{})]})})]}),e.jsx(l,{control:s.control,name:"Underground_Tank",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Underground Water Tank"}),e.jsxs(h,{disabled:i,onValueChange:n=>{r.onChange(n==="true"),n==="false"&&(s.setValue("Underground_Tank_Position",""),s.setValue("Underground_Tank_Capacity",""))},value:r.value?"true":"false",defaultValue:r.value?"true":"false",children:[e.jsx(d,{children:e.jsx(m,{children:e.jsx(u,{defaultValue:r.value?"true":"false",placeholder:"Underground Water Tank"})})}),e.jsxs(p,{children:[e.jsx(x,{value:"true",children:"Yes"}),e.jsx(x,{value:"false",children:"No"})]})]}),e.jsx(t,{})]})}),s.watch("Underground_Tank")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx(l,{control:s.control,name:"Underground_Tank_Position",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Underground Tank Position"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Underground Tank Position",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Underground_Tank_Capacity",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Underground Tank Capacity"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Underground Tank Capacity",...r})}),e.jsx(t,{})]})})]}),e.jsx(l,{control:s.control,name:"Septic_Tank",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Septic Tank"}),e.jsxs(h,{disabled:i,onValueChange:n=>{r.onChange(n==="true"),n==="false"&&(s.setValue("Septic_Tank_Position",""),s.setValue("Septic_Tank_Capacity",""))},value:r.value?"true":"false",defaultValue:r.value?"true":"false",children:[e.jsx(d,{children:e.jsx(m,{children:e.jsx(u,{defaultValue:r.value?"true":"false",placeholder:"Septic Tank"})})}),e.jsxs(p,{children:[e.jsx(x,{value:"true",children:"Yes"}),e.jsx(x,{value:"false",children:"No"})]})]}),e.jsx(t,{})]})}),s.watch("Septic_Tank")&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[e.jsx(l,{control:s.control,name:"Septic_Tank_Position",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Septic Tank Position"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Septic Tank Position",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Septic_Tank_Capacity",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Septic Tank Capacity"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Septic Tank Capacity",...r})}),e.jsx(t,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(l,{control:s.control,name:"No_of_Floors",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"No of Floors"}),e.jsx(d,{children:e.jsx(c,{type:"number",placeholder:"No of Floors",disabled:i,...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Future_Expantion",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Future Expantion"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Future Expantion",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Remarks",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Remarks (Additional Info)"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Remarks (Additional Info)",...r})}),e.jsx(t,{})]})})]})]}),j===3&&e.jsxs(e.Fragment,{children:[e.jsx(l,{control:s.control,name:"Site_Person_Name",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Site Person Name"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Site Person Name",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Site_Email",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Site Email"}),e.jsx(d,{children:e.jsx(c,{type:"email",disabled:i,placeholder:"site@example.com",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Site_Phone1",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Site Phone 1"}),e.jsx(d,{children:e.jsx(c,{type:"tel",disabled:i,placeholder:"Site Phone 1",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Site_Phone2",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Site Phone 2"}),e.jsx(d,{children:e.jsx(c,{type:"tel",disabled:i,placeholder:"Site Phone 2",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Owner_Name",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Owner Name"}),e.jsx(d,{children:e.jsx(c,{disabled:i,placeholder:"Owner Name",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Owner_Email",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Owner Email"}),e.jsx(d,{children:e.jsx(c,{type:"email",disabled:i,placeholder:"owner@example.com",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Owner_Phone1",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Owner Phone 1"}),e.jsx(d,{children:e.jsx(c,{type:"tel",disabled:i,placeholder:"Owner Phone 1",...r})}),e.jsx(t,{})]})}),e.jsx(l,{control:s.control,name:"Owner_Phone2",render:({field:r})=>e.jsxs(a,{children:[e.jsx(o,{children:"Owner Phone 2"}),e.jsx(d,{children:e.jsx(c,{type:"tel",disabled:i,placeholder:"Owner Phone 2",...r})}),e.jsx(t,{})]})})]}),j===4&&e.jsxs("div",{children:[e.jsx("h1",{children:"Completed"}),e.jsx(D,{children:"Submit"})]})]}),e.jsx("div",{className:"mt-8 pt-5",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:V,disabled:j===0,className:"rounded bg-white px-2 py-1 text-sm font-semibold text-sky-900 shadow-sm ring-1 ring-inset ring-sky-300 hover:bg-sky-50 disabled:cursor-not-allowed disabled:opacity-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),e.jsx("button",{type:"button",onClick:O,disabled:j===f.length-1,className:"rounded bg-white px-2 py-1 text-sm font-semibold text-sky-900 shadow-sm ring-1 ring-inset ring-sky-300 hover:bg-sky-50 disabled:cursor-not-allowed disabled:opacity-50",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})})]})})]})},se=re;function be(){const{id:b}=L(),k=[{title:"Dashboard",link:"/"},{title:"Projects",link:"/projects"},{title:`${b}`,link:`/projects/${b}`}];return e.jsx(M,{scrollable:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{items:k}),e.jsx(se,{id:b})]})})}export{be as default};
